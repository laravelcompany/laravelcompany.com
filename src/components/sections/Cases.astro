---
import { Image } from "astro:assets";
import Card from "../ui/Card.astro";
import Section from "./Section.astro";
import SectionTitle from "../ui/SectionTitle.astro";

// Unified case studies data structure with a "featured" flag
const caseStudies = [
  {
    clientType: "Local Council",
    title: "Custom Laravel CRM System for UK Local Government",
    description: "We designed and implemented a robust Laravel CRM system that manages both customer and employee data for a local council. The scalable application successfully serves 10,000+ users across the UK, improving administrative efficiency by 40%.",
    technologies: ["Laravel", "MySQL", "Vue.js", "API Integration"],
    link: "/case-studies/local-council-crm",
    imageAlt: "Laravel CRM dashboard for local council",
    category: "laravel",
    featured: false
  },
  {
    clientType: "Healthcare Provider",
    title: "Laravel Patient Management System with HIPAA Compliance",
    description: "Developed a secure Laravel-based patient management system with encrypted data storage, role-based access controls, and full HIPAA compliance. The system processes 5,000+ patient records daily with 99.9% uptime.",
    technologies: ["Laravel", "PostgreSQL", "Redis", "AWS"],
    link: "/case-studies/healthcare-patient-system",
    imageAlt: "Laravel healthcare management platform interface",
    category: "laravel",
    featured: false
  },
  {
    clientType: "E-commerce Platform",
    title: "High-Performance Laravel Shop with 300% Faster Checkout",
    description: "Redesigned an existing e-commerce platform using Laravel and optimized database queries, resulting in 300% faster checkout process and 45% reduction in cart abandonment. The system handles 10,000+ transactions daily.",
    technologies: ["Laravel", "MySQL", "Redis", "Elasticsearch"],
    link: "/case-studies/ecommerce-platform",
    imageAlt: "Laravel e-commerce platform performance dashboard",
    category: "laravel",
    featured: false
  },
  {
    clientType: "Data Center Provider",
    title: "Laravel IoT Energy Monitoring CRM with The Things Network",
    description: "Developed a specialized CRM system that monitors and charges for server energy consumption across multiple data centers. The solution integrates with The Things Network IoT sensors to track real-time energy metrics, resulting in 28% improved billing accuracy and 15% reduction in energy costs.",
    technologies: ["Laravel", "The Things Network", "IoT Sensors", "Time-series DB", "REST API"],
    link: "/case-studies/energy-monitoring-crm",
    imageAlt: "Laravel energy monitoring dashboard with IoT integration",
    features: [
      "Real-time energy consumption tracking across 500+ servers",
      "Automated billing based on actual resource usage",
      "Anomaly detection with predictive maintenance alerts"
    ],
    category: "enterprise",
    featured: true
  },
  {
    clientType: "Media Corporation",
    title: "Enterprise WordPress Multisite Manager for UK Media Giant",
    description: "Created a centralized WordPress multisite management solution for one of the UK's largest media companies. The system manages 200+ individual sites with custom role management, centralized content distribution, and integrated analytics, reducing site maintenance costs by 35%.",
    technologies: ["WordPress", "PHP", "MySQL", "REST API", "React"],
    link: "/case-studies/wordpress-multisite-manager",
    imageAlt: "WordPress multisite management dashboard interface",
    features: [
      "Centralized content publishing across 200+ sites",
      "Custom role-based access for 500+ editors and contributors",
      "Real-time analytics dashboard for content performance"
    ],
    category: "enterprise",
    featured: true
  },
];

// Filter case studies by category
const laravelCaseStudies = caseStudies.filter(study => study.category === "laravel");
const featuredCaseStudies = caseStudies.filter(study => study.featured);
---

<Section id="laravel-case-studies">
  <SectionTitle
    sectionTitle="Laravel Success Stories"
    description="Explore real-world examples of how our Laravel development expertise has delivered powerful, scalable solutions for businesses across various industries."
  />
  
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {laravelCaseStudies.map((study) => (
      <Card>
        <article 
          class="flex flex-col h-full p-6 lg:p-8 bg-dark text-gray rounded-3xl"
          itemscope 
          itemtype="http://schema.org/Case"
        >
          <span class="text-green text-sm font-medium mb-3" itemprop="industry">{study.clientType}</span>
          <h3 class="text-xl font-bold mb-4" itemprop="name">{study.title}</h3>
          <p class="mb-6" itemprop="description">{study.description}</p>
          
          <div class="mt-auto">
            <h4 class="text-sm text-green mb-2">Technologies:</h4>
            <ul class="flex flex-wrap gap-2" itemprop="keywords">
              {study.technologies.map(tech => (
                <li class="bg-success bg-opacity-10 text-xs px-3 py-1 rounded-full">{tech}</li>
              ))}
            </ul>
            
            <a 
              href={study.link} 
              class="mt-4 inline-flex items-center text-green hover:text-white transition-colors"
            >
              View case study
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
            </a>
          </div>
        </article>
      </Card>
    ))}
  </div>
</Section>

<div id="featured-projects" class="w-full max-w-[1280px] mx-auto" style="margin-top:10vh">
  <SectionTitle
    sectionTitle="Featured Enterprise Solutions"
    description="Our most innovative projects that demonstrate our capabilities in handling complex business requirements for large-scale enterprises."
  />
  
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    {featuredCaseStudies.map((study) => (
      <Card>
        <article 
          class="flex flex-col h-full p-6 lg:p-8 bg-dark text-gray rounded-3xl border-2 border-green"
          itemscope 
          itemtype="http://schema.org/Case"
        >
          <div class="flex items-center justify-between mb-4">
            <span class="text-green text-sm font-medium" itemprop="industry">{study.clientType}</span>
            <span class="bg-green text-dark text-xs px-3 py-1 rounded-full">Featured</span>
          </div>
          
          <h3 class="text-xl lg:text-2xl font-bold mb-4" itemprop="name">{study.title}</h3>
          <p class="mb-6" itemprop="description">{study.description}</p>
          
          {study.features && (
            <div class="mb-6">
              <h4 class="text-sm text-green mb-3">Key Features:</h4>
              <ul class="space-y-2">
                {study.features.map(feature => (
                  <li class="flex items-start">
                    <svg class="h-5 w-5 text-green mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    <span>{feature}</span>
                  </li>
                ))}
              </ul>
            </div>
          )}
          
          <div class="mb-6">
            <h4 class="text-sm text-green mb-2">Technologies:</h4>
            <ul class="flex flex-wrap gap-2" itemprop="keywords">
              {study.technologies.map(tech => (
                <li class="bg-success bg-opacity-10 text-xs px-3 py-1 rounded-full">{tech}</li>
              ))}
            </ul>
          </div>
          
          <a 
            href={study.link} 
            class="mt-auto inline-flex items-center text-green hover:text-white transition-colors"
          >
            Read full case study
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </a>
        </article>
      </Card>
    ))}
  </div>
  
  <div class="text-center mt-12">
    <a 
      href="/contact" 
      class="bg-green text-dark px-6 py-3 rounded-full font-medium hover:bg-opacity-90 transition-all inline-flex items-center"
    >
      Discuss your enterprise project
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
      </svg>
    </a>
  </div>
</Section>